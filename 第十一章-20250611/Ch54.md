# Ch54 并发控制

## 事务并发
多用户数据库系统, 允许多个用户同时使用数据库系统

带来的问题
- 会产生多个事务同时存取同一数据的情况
- 可能会存取不正确的数据, 破坏事务隔离性和一致性


数据库管理系统必须提供并发控制机制, 是衡量一个数据库管理系统性能的重要标志之一

## 多事务执行方式

### 事务串行执行
每个时刻只有一个事务运行, 其他事务必须等到这个事务结束以后方能运行

### 交叉并发方式
单处理机系统中, 事务的并行执行是并行事务的并行操作交叉运行


### 同时并发方式
多处理机系统中, 每个处理机可以运行一个事务, 多个处理机可以同时运行多个事务, 实现多个事务真正的并行运行


## 并发控制
事务是并发控制的基本单位

并发控制机制的任务
- 对并发操作进行正确调度
- 保证事务的隔离性
- 保证数据库的一致性

并发操作带来的数据不一致性
- 丢失修改
- 不可重复读
- 读"脏"数据

### 丢失修改
两个事务$T_1$和$T_2$读入同一数据并修改, $T_2$的提交结果破坏了$T_1$的提交结果, 导致$T_1$的修改被丢失

### 不可重复读
$T_1$读取数据后, $T_2$执行更新, 使$T_1$无法再现前一次读取结果

### 读"脏"数据
$T_1$修改某一数据, 并将其写回磁盘, $T_2$读取同一数据后, $T_1$由于某种原因被撤销, $T_2$读取到的数据即为"脏"数据, 即不正确的数据


由于并发操作破坏了事务的隔离性

并发控制就是要用正确的方式调度并发操作, 使一个用户事务的执行不受其他事务的干扰, 从而避免造成数据的不一致性