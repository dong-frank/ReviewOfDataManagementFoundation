# Ch51 恢复策略

事务故障的恢复由系统自动完成, 对用户是透明的, 不需要用户干预

## 事务故障的恢复步骤
1. 反向扫描日志文件, 即从最后向前扫描, 查找该事务的更新操作
2. 对该事务的更新操作执行逆操作
3. 继续反向扫描
4. 如此处理下去直到读到此事务的开始标记

## 系统故障的恢复步骤
系统故障的恢复由系统重新启动后自动完成, 不需要用户干预
1. 正向扫描日志文件, 将事务分为重做队列和撤销队列
2. 对撤销队列事务进行撤销处理
   1. 反向扫描, 对每个撤销事务执行逆操作
3. 对重做队列事务进行重做
   1. 正向扫描, 对每个重做事务重新执行日志上登记的操作

## 介质故障的恢复
- 重装数据库
- 重做已完成的事务

需要数据库管理员的介入
- 重装最近转储的数据库后备副本和有关日志文件副本
- 执行系统提供的恢复命令
- 具体的恢复操作仍由数据库管理系统完成