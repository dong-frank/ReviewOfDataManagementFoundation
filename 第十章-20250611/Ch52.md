# Ch52 具有检查点的恢复技术

恢复的两个问题
- 搜索整个日志耗费大量时间
- 重新执行浪费大量时间

具有检查点的恢复技术
- 在日志中增加检查点记录
- 增加重新开始文件
- 恢复子系统在登录日志文件期间, 动态地维护日志

## 检查点技术
检查点记录的内容
- 建立检查点时刻所有正在执行的事务清单
- 这些事务最近一个日志记录的地址

重新开始文件的内容
- 记录各个检查点记录在日志文件中的地址

动态维护日志文件的方法
- 周期性地执行建立检查点, 保存数据库状态
  - 将当前日志缓冲区中的所有日志记录写入磁盘
  - 在日志文件中写入一个检查点记录
  - 将当前数据缓冲区的所有数据记录写入磁盘
  - 把检查点记录在日志文件中的地址写入重新开始文件


## 利用检查点的恢复策略
使用检查点可以改善恢复效率
- 当事务T在一个检查点之前提交, 创建检查点时就会把修改写入磁盘
- 进行恢复处理时就没有必要对T进行重做


