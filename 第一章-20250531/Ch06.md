# Ch06数据库系统的结构
从应用开发人员角度, 通常采用三级模式结构, 是数据库系统内部的系统结构

## 模式和实例
- 模式(schema)
  - 数据库逻辑结构和特征的描述
  - 是型的描述, 不涉及具体值
  - 是相对稳定的
- 实例(instance)
  - 反映数据库某一时刻的状态
  - 模式的一个具体值
  - 同一个模式可以有很多实例
  - 实例随数据库中的数据的更新而变动

## 数据库系统的三级模式结构
![alt text](/assets/ch06image0.png)

模式, 也称逻辑模式
- 数据库中全体数据的逻辑结构和特征的描述
- 所有用户的公共数据视图

**一个数据库只有一个模式**

模式的地位: 是数据库系统模式结构的中间层
- 与底层数据存储的物理实现无关
- 与具体的应用程序无关

模式的定义
- 数据的逻辑结构
- 数据之间的联系
- 数据有关的安全性, 完整性要求

### 外模式
也称子模式或用户模式, 是数据库用户使用的局部数据的逻辑结构和特征的描述, 是与某一应用有关的数据的逻辑表示

外模式的地位: 介于模式与应用之间

模式与外模式是一对多, 因为数据库只能有一个模式, 但根据具体需求, 可以有多个外模式

外模式与应用是一对多, 因为一个应用只能有一个外模式, 但一个外模式可以被多个应用使用

**有模式不就够了, 为什么要有外模式**
- 保护数据库安全性的一个有力措施
- 每个用户只能看见自己所对应的外模式中的数据

### 内模式
也称为存储模式, 是数据物理结构和存储方式的描述

是数据在数据库内部的表示方式
- 记录的存储方式 *顺序存储, 堆存储, hash存储*
- 索引的组织方式
- 数据是否压缩
- 数据是否加密
- 数据存储记录结构的规定

**一个数据库只有一个内模式**


### 数据库的二级映像与数据独立性
三级模式是对数据的三个抽象级别

DBMS通过二级映像实现这三个抽象层次的联系和转换
- 外模式/模式映像
- 模式/内模式映像

保证数据的独立性
- 当模式修改时, 数据库管理员只需要修改外模式/模式映像, 就可以使外模式保持不变, 由于应用程序是依据外模式编写的, 因此应用程序也不必修改, 保证了**数据与程序的逻辑独立性**
- 当数据库的存储结构改变, 数据库管理员只需要修改模式/内模式映像, 使模式保持不变, 应用程序也不会受影响, 保证了**数据与程序的物理独立性**

有了数据库的二级映像, 除非应用需求本身发生变化, 否则应用程序一般不需要修改

数据与程序的独立, 使得数据的定义和描述可以从应用程序分离出去
存取由数据库管理系统管理